<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - TransitRate</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Core Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/echarts/5.4.3/echarts.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/typed.js/2.0.12/typed.min.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/splitting@1.0.6/dist/splitting.css">
    <script src="https://unpkg.com/splitting@1.0.6/dist/splitting.min.js"></script>
    
    <!-- Custom Styles -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap');
        
        * {
            font-family: 'Inter', sans-serif;
        }
        
        .gradient-text {
            background: linear-gradient(135deg, #1e3a8a 0%, #0891b2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .nav-blur {
            backdrop-filter: blur(20px);
            background: rgba(255, 255, 255, 0.9);
        }
        
        .metric-card {
            backdrop-filter: blur(10px);
            background: rgba(255, 255, 255, 0.95);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
        }
        
        .metric-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
        }
        
        .chart-container {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            padding: 24px;
            margin-bottom: 24px;
        }
        
        .route-selector {
            background: white;
            border: 1px solid #d1d5db;
            border-radius: 8px;
            padding: 12px 16px;
            font-size: 16px;
            width: 100%;
            max-width: 300px;
        }
        
        .trend-up {
            color: #059669;
        }
        
        .trend-down {
            color: #dc2626;
        }
        
        .trend-neutral {
            color: #6b7280;
        }
        
        .animate-counter {
            font-variant-numeric: tabular-nums;
        }
        
        .dashboard-header {
            background: linear-gradient(135deg, #1e3a8a 0%, #0891b2 100%);
        }
        
        .metric-icon {
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
        }
        
        .chart-header {
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
            border-bottom: 1px solid #e2e8f0;
        }
        
        .data-table-row:hover {
            background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);
        }
        
        .export-btn {
            background: linear-gradient(135deg, #059669 0%, #047857 100%);
        }
        
        .filter-chip {
            background: linear-gradient(135deg, #e2e8f0 0%, #cbd5e1 100%);
            transition: all 0.2s ease;
        }
        
        .filter-chip:hover {
            background: linear-gradient(135deg, #bfdbfe 0%, #93c5fd 100%);
        }
        
        .filter-chip.active {
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
            color: white;
        }
        
        .progress-ring {
            transform: rotate(-90deg);
        }
        
        .progress-ring-circle {
            transition: stroke-dashoffset 0.35s;
            transform-origin: 50% 50%;
        }
        
        .metric-trend {
            font-size: 0.75rem;
            font-weight: 600;
        }
        
        .chart-legend {
            font-size: 0.875rem;
            color: #6b7280;
        }
        
        .data-export-modal {
            backdrop-filter: blur(10px);
            background: rgba(0, 0, 0, 0.5);
        }
        
        .export-option {
            transition: all 0.2s ease;
        }
        
        .export-option:hover {
            background: #f3f4f6;
            transform: translateY(-2px);
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-900">
    <!-- Navigation -->
    <nav class="fixed top-0 left-0 right-0 z-50 nav-blur border-b border-gray-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center space-x-2">
                    <div class="w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center">
                        <span class="text-white font-bold text-sm">TR</span>
                    </div>
                    <span class="text-xl font-bold gradient-text">TransitRate</span>
                </div>
                
                <div class="hidden md:flex items-center space-x-8">
                    <a href="index.html" class="text-gray-700 hover:text-blue-600 transition-colors font-medium">Home</a>
                    <a href="india-transit.html" class="text-gray-700 hover:text-blue-600 transition-colors font-medium">India Transit</a>
                    <a href="dashboard.html" class="text-blue-600 font-medium">Dashboard</a>
                    <a href="reviews.html" class="text-gray-700 hover:text-blue-600 transition-colors font-medium">Reviews</a>
                    <a href="submit-review.html" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors font-medium">Rate Route</a>
                </div>
                
                <div class="md:hidden">
                    <button id="mobile-menu-btn" class="text-gray-700 hover:text-blue-600">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                        </svg>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Dashboard Header -->
    <section class="pt-24 pb-8 bg-white">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex flex-col lg:flex-row lg:items-center lg:justify-between gap-6">
                <div>
                    <h1 class="text-4xl font-bold text-gray-800 mb-2">Route Performance Dashboard</h1>
                    <p class="text-xl text-gray-600">Monitor and analyze transit route performance in real-time</p>
                </div>
                
                <div class="flex flex-col sm:flex-row gap-4">
                    <select id="route-selector" class="route-selector">
                        <option value="all">All Routes</option>
                        <option value="route-15">Route 15 - Downtown Express</option>
                        <option value="route-23">Route 23 - Airport Shuttle</option>
                        <option value="route-7">Route 7 - University Loop</option>
                        <option value="route-42">Route 42 - Shopping District</option>
                        <option value="route-11">Route 11 - Residential Connector</option>
                    </select>
                    
                    <button id="export-btn" class="bg-teal-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-teal-700 transition-all">
                        Export Data
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- Key Metrics -->
    <section class="py-8">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                <!-- Average Rating -->
                <div class="metric-card rounded-xl p-6 shadow-lg">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-sm font-medium text-gray-600">Average Rating</h3>
                        <div class="text-green-600">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                    <div class="flex items-baseline">
                        <div class="text-3xl font-bold text-gray-800 animate-counter" data-target="4.2">0</div>
                        <div class="ml-2 text-sm text-gray-600">/ 5.0</div>
                    </div>
                    <div class="flex items-center mt-2">
                        <span class="text-sm trend-up">↗ +0.3</span>
                        <span class="text-sm text-gray-500 ml-1">vs last month</span>
                    </div>
                </div>

                <!-- Total Reviews -->
                <div class="metric-card rounded-xl p-6 shadow-lg">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-sm font-medium text-gray-600">Total Reviews</h3>
                        <div class="text-blue-600">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path>
                            </svg>
                        </div>
                    </div>
                    <div class="text-3xl font-bold text-gray-800 animate-counter" data-target="8932">0</div>
                    <div class="flex items-center mt-2">
                        <span class="text-sm trend-up">↗ +12%</span>
                        <span class="text-sm text-gray-500 ml-1">vs last month</span>
                    </div>
                </div>

                <!-- Response Rate -->
                <div class="metric-card rounded-xl p-6 shadow-lg">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-sm font-medium text-gray-600">Response Rate</h3>
                        <div class="text-teal-600">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                    <div class="text-3xl font-bold text-gray-800 animate-counter" data-target="87">0</div>
                    <div class="text-sm text-gray-600">%</div>
                    <div class="flex items-center mt-2">
                        <span class="text-sm trend-neutral">→ 0%</span>
                        <span class="text-sm text-gray-500 ml-1">vs last month</span>
                    </div>
                </div>

                <!-- Active Routes -->
                <div class="metric-card rounded-xl p-6 shadow-lg">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-sm font-medium text-gray-600">Active Routes</h3>
                        <div class="text-purple-600">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                            </svg>
                        </div>
                    </div>
                    <div class="text-3xl font-bold text-gray-800 animate-counter" data-target="47">0</div>
                    <div class="flex items-center mt-2">
                        <span class="text-sm trend-up">↗ +2</span>
                        <span class="text-sm text-gray-500 ml-1">new routes</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Charts Section -->
    <section class="py-8">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <!-- Rating Trends Chart -->
                <div class="chart-container">
                    <h3 class="text-xl font-semibold text-gray-800 mb-4">Rating Trends (Last 6 Months)</h3>
                    <div id="rating-trends-chart" style="height: 300px;"></div>
                </div>

                <!-- Rating Distribution -->
                <div class="chart-container">
                    <h3 class="text-xl font-semibold text-gray-800 mb-4">Rating Distribution</h3>
                    <div id="rating-distribution-chart" style="height: 300px;"></div>
                </div>

                <!-- Route Performance Comparison -->
                <div class="chart-container">
                    <h3 class="text-xl font-semibold text-gray-800 mb-4">Route Performance Comparison</h3>
                    <div id="route-comparison-chart" style="height: 300px;"></div>
                </div>

                <!-- Review Volume -->
                <div class="chart-container">
                    <h3 class="text-xl font-semibold text-gray-800 mb-4">Review Volume by Month</h3>
                    <div id="review-volume-chart" style="height: 300px;"></div>
                </div>
            </div>
        </div>
    </section>

    <!-- Route Details Table -->
    <section class="py-8">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="bg-white rounded-xl shadow-lg overflow-hidden">
                <div class="px-6 py-4 border-b border-gray-200">
                    <h3 class="text-xl font-semibold text-gray-800">Route Performance Details</h3>
                </div>
                
                <div class="overflow-x-auto">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-50">
                            <tr>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Route</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Avg Rating</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Total Reviews</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Punctuality</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Cleanliness</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Comfort</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Trend</th>
                            </tr>
                        </thead>
                        <tbody id="route-table-body" class="bg-white divide-y divide-gray-200">
                            <!-- Table rows will be populated by JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-12">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center">
                <div class="flex items-center justify-center space-x-2 mb-4">
                    <div class="w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center">
                        <span class="text-white font-bold text-sm">TR</span>
                    </div>
                    <span class="text-xl font-bold">TransitRate</span>
                </div>
                <p class="text-gray-400 mb-4">Improving public transportation through community feedback</p>
                <p class="text-sm text-gray-500">© 2024 TransitRate. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        // Dashboard JavaScript
        document.addEventListener('DOMContentLoaded', function() {
            initializeDashboard();
        });

        function initializeDashboard() {
            initializeCounters();
            initializeCharts();
            initializeRouteTable();
            initializeEventListeners();
        }

        // Counter animation
        function initializeCounters() {
            const counters = document.querySelectorAll('.animate-counter');
            
            const observerOptions = {
                threshold: 0.5,
                rootMargin: '0px 0px -100px 0px'
            };
            
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        animateCounter(entry.target);
                        observer.unobserve(entry.target);
                    }
                });
            }, observerOptions);
            
            counters.forEach(counter => observer.observe(counter));
        }

        function animateCounter(element) {
            const target = parseFloat(element.dataset.target);
            const duration = 2000;
            const increment = target / (duration / 16);
            let current = 0;
            
            const timer = setInterval(() => {
                current += increment;
                if (current >= target) {
                    current = target;
                    clearInterval(timer);
                }
                
                if (target % 1 === 0) {
                    element.textContent = Math.floor(current).toLocaleString();
                } else {
                    element.textContent = current.toFixed(1);
                }
            }, 16);
        }

        // Initialize charts
        function initializeCharts() {
            initializeRatingTrendsChart();
            initializeRatingDistributionChart();
            initializeRouteComparisonChart();
            initializeReviewVolumeChart();
        }

        function initializeRatingTrendsChart() {
            const chart = echarts.init(document.getElementById('rating-trends-chart'));
            
            const option = {
                tooltip: {
                    trigger: 'axis',
                    axisPointer: {
                        type: 'cross'
                    }
                },
                legend: {
                    data: ['Overall Rating', 'Punctuality', 'Cleanliness', 'Comfort']
                },
                grid: {
                    left: '3%',
                    right: '4%',
                    bottom: '3%',
                    containLabel: true
                },
                xAxis: {
                    type: 'category',
                    data: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun']
                },
                yAxis: {
                    type: 'value',
                    min: 0,
                    max: 5
                },
                series: [
                    {
                        name: 'Overall Rating',
                        type: 'line',
                        data: [3.8, 3.9, 4.0, 4.1, 4.2, 4.2],
                        smooth: true,
                        itemStyle: { color: '#3b82f6' }
                    },
                    {
                        name: 'Punctuality',
                        type: 'line',
                        data: [3.5, 3.7, 3.8, 3.9, 4.0, 4.1],
                        smooth: true,
                        itemStyle: { color: '#06b6d4' }
                    },
                    {
                        name: 'Cleanliness',
                        type: 'line',
                        data: [4.0, 4.1, 4.0, 4.2, 4.3, 4.2],
                        smooth: true,
                        itemStyle: { color: '#10b981' }
                    },
                    {
                        name: 'Comfort',
                        type: 'line',
                        data: [3.9, 4.0, 4.1, 4.0, 4.1, 4.2],
                        smooth: true,
                        itemStyle: { color: '#8b5cf6' }
                    }
                ]
            };
            
            chart.setOption(option);
            window.addEventListener('resize', () => chart.resize());
        }

        function initializeRatingDistributionChart() {
            const chart = echarts.init(document.getElementById('rating-distribution-chart'));
            
            const option = {
                tooltip: {
                    trigger: 'item',
                    formatter: '{a} <br/>{b}: {c} ({d}%)'
                },
                legend: {
                    orient: 'vertical',
                    left: 'left',
                    data: ['5 Stars', '4 Stars', '3 Stars', '2 Stars', '1 Star']
                },
                series: [
                    {
                        name: 'Rating Distribution',
                        type: 'pie',
                        radius: ['40%', '70%'],
                        avoidLabelOverlap: false,
                        label: {
                            show: false,
                            position: 'center'
                        },
                        emphasis: {
                            label: {
                                show: true,
                                fontSize: '18',
                                fontWeight: 'bold'
                            }
                        },
                        labelLine: {
                            show: false
                        },
                        data: [
                            { value: 3542, name: '5 Stars', itemStyle: { color: '#10b981' } },
                            { value: 3127, name: '4 Stars', itemStyle: { color: '#3b82f6' } },
                            { value: 1563, name: '3 Stars', itemStyle: { color: '#f59e0b' } },
                            { value: 521, name: '2 Stars', itemStyle: { color: '#ef4444' } },
                            { value: 179, name: '1 Star', itemStyle: { color: '#dc2626' } }
                        ]
                    }
                ]
            };
            
            chart.setOption(option);
            window.addEventListener('resize', () => chart.resize());
        }

        function initializeRouteComparisonChart() {
            const chart = echarts.init(document.getElementById('route-comparison-chart'));
            
            const option = {
                tooltip: {
                    trigger: 'axis',
                    axisPointer: {
                        type: 'shadow'
                    }
                },
                legend: {
                    data: ['Overall', 'Punctuality', 'Cleanliness', 'Comfort', 'Driver']
                },
                grid: {
                    left: '3%',
                    right: '4%',
                    bottom: '3%',
                    containLabel: true
                },
                xAxis: {
                    type: 'category',
                    data: ['Route 15', 'Route 23', 'Route 7', 'Route 42', 'Route 11']
                },
                yAxis: {
                    type: 'value',
                    min: 0,
                    max: 5
                },
                series: [
                    {
                        name: 'Overall',
                        type: 'bar',
                        data: [4.5, 4.2, 3.8, 4.7, 4.1],
                        itemStyle: { color: '#3b82f6' }
                    },
                    {
                        name: 'Punctuality',
                        type: 'bar',
                        data: [4.3, 4.0, 3.5, 4.6, 3.9],
                        itemStyle: { color: '#06b6d4' }
                    },
                    {
                        name: 'Cleanliness',
                        type: 'bar',
                        data: [4.6, 4.3, 4.0, 4.8, 4.2],
                        itemStyle: { color: '#10b981' }
                    },
                    {
                        name: 'Comfort',
                        type: 'bar',
                        data: [4.4, 4.1, 3.9, 4.5, 4.0],
                        itemStyle: { color: '#8b5cf6' }
                    },
                    {
                        name: 'Driver',
                        type: 'bar',
                        data: [4.7, 4.4, 4.1, 4.9, 4.3],
                        itemStyle: { color: '#f59e0b' }
                    }
                ]
            };
            
            chart.setOption(option);
            window.addEventListener('resize', () => chart.resize());
        }

        function initializeReviewVolumeChart() {
            const chart = echarts.init(document.getElementById('review-volume-chart'));
            
            const option = {
                tooltip: {
                    trigger: 'axis',
                    axisPointer: {
                        type: 'shadow'
                    }
                },
                grid: {
                    left: '3%',
                    right: '4%',
                    bottom: '3%',
                    containLabel: true
                },
                xAxis: {
                    type: 'category',
                    data: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun']
                },
                yAxis: {
                    type: 'value'
                },
                series: [
                    {
                        name: 'Reviews',
                        type: 'bar',
                        data: [1200, 1350, 1180, 1420, 1650, 1532],
                        itemStyle: {
                            color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
                                { offset: 0, color: '#3b82f6' },
                                { offset: 1, color: '#1d4ed8' }
                            ])
                        },
                        emphasis: {
                            itemStyle: {
                                color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
                                    { offset: 0, color: '#60a5fa' },
                                    { offset: 1, color: '#3b82f6' }
                                ])
                            }
                        }
                    }
                ]
            };
            
            chart.setOption(option);
            window.addEventListener('resize', () => chart.resize());
        }

        // Initialize route table
        function initializeRouteTable() {
            const routeData = [
                {
                    route: 'Route 15 - Downtown Express',
                    avgRating: 4.5,
                    totalReviews: 1247,
                    punctuality: 4.3,
                    cleanliness: 4.6,
                    comfort: 4.4,
                    trend: 'up'
                },
                {
                    route: 'Route 23 - Airport Shuttle',
                    avgRating: 4.2,
                    totalReviews: 892,
                    punctuality: 4.0,
                    cleanliness: 4.3,
                    comfort: 4.1,
                    trend: 'up'
                },
                {
                    route: 'Route 7 - University Loop',
                    avgRating: 3.8,
                    totalReviews: 1156,
                    punctuality: 3.5,
                    cleanliness: 4.0,
                    comfort: 3.9,
                    trend: 'neutral'
                },
                {
                    route: 'Route 42 - Shopping District',
                    avgRating: 4.7,
                    totalReviews: 743,
                    punctuality: 4.6,
                    cleanliness: 4.8,
                    comfort: 4.5,
                    trend: 'up'
                },
                {
                    route: 'Route 11 - Residential Connector',
                    avgRating: 4.1,
                    totalReviews: 894,
                    punctuality: 3.9,
                    cleanliness: 4.2,
                    comfort: 4.0,
                    trend: 'down'
                }
            ];

            const tableBody = document.getElementById('route-table-body');
            tableBody.innerHTML = routeData.map(route => `
                <tr class="hover:bg-gray-50">
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="text-sm font-medium text-gray-900">${route.route}</div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="flex items-center">
                            <div class="flex text-yellow-400 mr-2">
                                ${'★'.repeat(Math.floor(route.avgRating))}${'☆'.repeat(5 - Math.floor(route.avgRating))}
                            </div>
                            <span class="text-sm text-gray-900">${route.avgRating}</span>
                        </div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                        ${route.totalReviews.toLocaleString()}
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="flex items-center">
                            <div class="w-16 bg-gray-200 rounded-full h-2 mr-2">
                                <div class="bg-blue-600 h-2 rounded-full" style="width: ${(route.punctuality / 5) * 100}%"></div>
                            </div>
                            <span class="text-sm text-gray-900">${route.punctuality}</span>
                        </div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="flex items-center">
                            <div class="w-16 bg-gray-200 rounded-full h-2 mr-2">
                                <div class="bg-green-600 h-2 rounded-full" style="width: ${(route.cleanliness / 5) * 100}%"></div>
                            </div>
                            <span class="text-sm text-gray-900">${route.cleanliness}</span>
                        </div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="flex items-center">
                            <div class="w-16 bg-gray-200 rounded-full h-2 mr-2">
                                <div class="bg-purple-600 h-2 rounded-full" style="width: ${(route.comfort / 5) * 100}%"></div>
                            </div>
                            <span class="text-sm text-gray-900">${route.comfort}</span>
                        </div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <span class="text-sm ${route.trend === 'up' ? 'text-green-600' : route.trend === 'down' ? 'text-red-600' : 'text-gray-600'}">
                            ${route.trend === 'up' ? '↗' : route.trend === 'down' ? '↘' : '→'}
                        </span>
                    </td>
                </tr>
            `).join('');
        }

        // Initialize event listeners
        function initializeEventListeners() {
            const routeSelector = document.getElementById('route-selector');
            const exportBtn = document.getElementById('export-btn');
            const mobileMenuBtn = document.getElementById('mobile-menu-btn');

            routeSelector.addEventListener('change', function() {
                // Simulate data refresh
                showNotification('Dashboard updated for selected route', 'info');
            });

            exportBtn.addEventListener('click', function() {
                showNotification('Data export started. Download will begin shortly.', 'success');
                
                // Simulate download after delay
                setTimeout(() => {
                    const link = document.createElement('a');
                    link.href = 'data:text/csv;charset=utf-8,Route,Average Rating,Total Reviews,Punctuality,Cleanliness,Comfort\nRoute 15 - Downtown Express,4.5,1247,4.3,4.6,4.4';
                    link.download = 'transit-data-export.csv';
                    link.click();
                }, 1500);
            });

            if (mobileMenuBtn) {
                mobileMenuBtn.addEventListener('click', function() {
                    // Mobile menu functionality
                    const mobileMenu = document.getElementById('mobile-menu');
                    if (mobileMenu) {
                        mobileMenu.classList.toggle('hidden');
                    }
                });
            }
        }

        // Notification system
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `fixed top-20 right-4 z-50 px-6 py-4 rounded-lg shadow-lg text-white font-medium transform translate-x-full transition-transform duration-300`;
            
            const colors = {
                success: 'bg-green-500',
                warning: 'bg-yellow-500',
                error: 'bg-red-500',
                info: 'bg-blue-500'
            };
            
            notification.classList.add(colors[type]);
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            // Animate in
            setTimeout(() => {
                notification.classList.remove('translate-x-full');
            }, 100);
            
            // Animate out and remove
            setTimeout(() => {
                notification.classList.add('translate-x-full');
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 300);
            }, 3000);
        }
    </script>
    <script src="transitrate.js"></script>
</body>
</html>