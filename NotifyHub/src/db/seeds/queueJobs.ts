import { db } from '@/db';
import { queueJobs } from '@/db/schema';

async function main() {
    const sampleQueueJobs = [
        {
            notificationId: 1,
            jobId: 'job_2024_01_15_09_15_001_email_mumbai',
            queue: 'email',
            priority: 8,
            status: 'completed',
            attempts: 1,
            processedAt: new Date('2024-01-15T09:15:30+05:30').toISOString(),
            failedAt: null,
            completedAt: new Date('2024-01-15T09:15:45+05:30').toISOString(),
            error: null,
            createdAt: new Date('2024-01-15T09:15:00+05:30').toISOString(),
            updatedAt: new Date('2024-01-15T09:15:45+05:30').toISOString(),
        },
        {
            notificationId: 2,
            jobId: 'job_2024_01_15_08_30_002_sms_delhi',
            queue: 'sms',
            priority: 10,
            status: 'failed',
            attempts: 3,
            processedAt: new Date('2024-01-15T08:30:15+05:30').toISOString(),
            failedAt: new Date('2024-01-15T08:32:20+05:30').toISOString(),
            completedAt: null,
            error: 'DND (Do Not Disturb) number - customer has opted out of promotional messages',
            createdAt: new Date('2024-01-15T08:30:00+05:30').toISOString(),
            updatedAt: new Date('2024-01-15T08:32:20+05:30').toISOString(),
        },
        {
            notificationId: 3,
            jobId: 'job_2024_01_15_18_45_003_push_bangalore',
            queue: 'push',
            priority: 7,
            status: 'completed',
            attempts: 1,
            processedAt: new Date('2024-01-15T18:45:10+05:30').toISOString(),
            failedAt: null,
            completedAt: new Date('2024-01-15T18:45:25+05:30').toISOString(),
            error: null,
            createdAt: new Date('2024-01-15T18:45:00+05:30').toISOString(),
            updatedAt: new Date('2024-01-15T18:45:25+05:30').toISOString(),
        },
        {
            notificationId: 4,
            jobId: 'job_2024_01_16_07_20_004_email_chennai',
            queue: 'email',
            priority: 9,
            status: 'failed',
            attempts: 2,
            processedAt: new Date('2024-01-16T07:20:30+05:30').toISOString(),
            failedAt: new Date('2024-01-16T07:22:45+05:30').toISOString(),
            completedAt: null,
            error: 'SMTP timeout - mail server unreachable during peak hours',
            createdAt: new Date('2024-01-16T07:20:00+05:30').toISOString(),
            updatedAt: new Date('2024-01-16T07:22:45+05:30').toISOString(),
        },
        {
            notificationId: 5,
            jobId: 'job_2024_01_16_14_15_005_sms_hyderabad',
            queue: 'sms',
            priority: 6,
            status: 'completed',
            attempts: 2,
            processedAt: new Date('2024-01-16T14:15:20+05:30').toISOString(),
            failedAt: null,
            completedAt: new Date('2024-01-16T14:16:10+05:30').toISOString(),
            error: null,
            createdAt: new Date('2024-01-16T14:15:00+05:30').toISOString(),
            updatedAt: new Date('2024-01-16T14:16:10+05:30').toISOString(),
        },
        {
            notificationId: 6,
            jobId: 'job_2024_01_16_20_30_006_push_pune',
            queue: 'push',
            priority: 3,
            status: 'failed',
            attempts: 4,
            processedAt: new Date('2024-01-16T20:30:15+05:30').toISOString(),
            failedAt: new Date('2024-01-16T20:35:30+05:30').toISOString(),
            completedAt: null,
            error: 'Device token expired - user needs to reinstall app',
            createdAt: new Date('2024-01-16T20:30:00+05:30').toISOString(),
            updatedAt: new Date('2024-01-16T20:35:30+05:30').toISOString(),
        },
        {
            notificationId: 7,
            jobId: 'job_2024_01_17_11_45_007_email_kolkata',
            queue: 'email',
            priority: 5,
            status: 'pending',
            attempts: 0,
            processedAt: null,
            failedAt: null,
            completedAt: null,
            error: null,
            createdAt: new Date('2024-01-17T11:45:00+05:30').toISOString(),
            updatedAt: new Date('2024-01-17T11:45:00+05:30').toISOString(),
        },
        {
            notificationId: 8,
            jobId: 'job_2024_01_17_19_20_008_sms_ahmedabad',
            queue: 'sms',
            priority: 8,
            status: 'failed',
            attempts: 3,
            processedAt: new Date('2024-01-17T19:20:10+05:30').toISOString(),
            failedAt: new Date('2024-01-17T19:25:45+05:30').toISOString(),
            completedAt: null,
            error: 'Carrier network unavailable - Airtel network congestion in Gujarat circle',
            createdAt: new Date('2024-01-17T19:20:00+05:30').toISOString(),
            updatedAt: new Date('2024-01-17T19:25:45+05:30').toISOString(),
        },
        {
            notificationId: 9,
            jobId: 'job_2024_01_17_16_10_009_push_jaipur',
            queue: 'push',
            priority: 4,
            status: 'active',
            attempts: 1,
            processedAt: new Date('2024-01-17T16:10:20+05:30').toISOString(),
            failedAt: null,
            completedAt: null,
            error: null,
            createdAt: new Date('2024-01-17T16:10:00+05:30').toISOString(),
            updatedAt: new Date('2024-01-17T16:10:20+05:30').toISOString(),
        },
        {
            notificationId: 10,
            jobId: 'job_2024_01_18_06_45_010_email_lucknow',
            queue: 'email',
            priority: 9,
            status: 'completed',
            attempts: 1,
            processedAt: new Date('2024-01-18T06:45:15+05:30').toISOString(),
            failedAt: null,
            completedAt: new Date('2024-01-18T06:45:40+05:30').toISOString(),
            error: null,
            createdAt: new Date('2024-01-18T06:45:00+05:30').toISOString(),
            updatedAt: new Date('2024-01-18T06:45:40+05:30').toISOString(),
        },
        {
            notificationId: 3,
            jobId: 'job_2024_01_18_09_30_011_sms_indore',
            queue: 'sms',
            priority: 7,
            status: 'failed',
            attempts: 2,
            processedAt: new Date('2024-01-18T09:30:25+05:30').toISOString(),
            failedAt: new Date('2024-01-18T09:32:10+05:30').toISOString(),
            completedAt: null,
            error: 'Invalid mobile number format - number should start with +91',
            createdAt: new Date('2024-01-18T09:30:00+05:30').toISOString(),
            updatedAt: new Date('2024-01-18T09:32:10+05:30').toISOString(),
        },
        {
            notificationId: 5,
            jobId: 'job_2024_01_18_15_20_012_push_bhopal',
            queue: 'push',
            priority: 6,
            status: 'delayed',
            attempts: 0,
            processedAt: null,
            failedAt: null,
            completedAt: null,
            error: null,
            createdAt: new Date('2024-01-18T15:20:00+05:30').toISOString(),
            updatedAt: new Date('2024-01-18T15:20:00+05:30').toISOString(),
        },
        {
            notificationId: 7,
            jobId: 'job_2024_01_19_12_15_013_email_kochi',
            queue: 'email',
            priority: 2,
            status: 'failed',
            attempts: 3,
            processedAt: new Date('2024-01-19T12:15:30+05:30').toISOString(),
            failedAt: new Date('2024-01-19T12:20:15+05:30').toISOString(),
            completedAt: null,
            error: 'Mailbox full - recipient mailbox has exceeded storage quota',
            createdAt: new Date('2024-01-19T12:15:00+05:30').toISOString(),
            updatedAt: new Date('2024-01-19T12:20:15+05:30').toISOString(),
        },
        {
            notificationId: 1,
            jobId: 'job_2024_01_19_17_45_014_sms_nagpur',
            queue: 'sms',
            priority: 5,
            status: 'completed',
            attempts: 2,
            processedAt: new Date('2024-01-19T17:45:20+05:30').toISOString(),
            failedAt: null,
            completedAt: new Date('2024-01-19T17:46:35+05:30').toISOString(),
            error: null,
            createdAt: new Date('2024-01-19T17:45:00+05:30').toISOString(),
            updatedAt: new Date('2024-01-19T17:46:35+05:30').toISOString(),
        },
        {
            notificationId: 2,
            jobId: 'job_2024_01_20_08_00_015_push_surat',
            queue: 'push',
            priority: 1,
            status: 'failed',
            attempts: 5,
            processedAt: new Date('2024-01-20T08:00:10+05:30').toISOString(),
            failedAt: new Date('2024-01-20T08:08:45+05:30').toISOString(),
            completedAt: null,
            error: 'App uninstalled - push notification service returned invalid registration',
            createdAt: new Date('2024-01-20T08:00:00+05:30').toISOString(),
            updatedAt: new Date('2024-01-20T08:08:45+05:30').toISOString(),
        }
    ];

    await db.insert(queueJobs).values(sampleQueueJobs);
    
    console.log('✅ Queue jobs seeder completed successfully');
}

main().catch((error) => {
    console.error('❌ Seeder failed:', error);
});